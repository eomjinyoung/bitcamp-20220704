<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex07</title>
</head>
<body>
<h1>AJAX - 동기 요청의 한계</h1>
<button id="btn1">요청</button><br>
<a href="http://www.google.com">구글로 이동</a><br>
<textarea id="ta" cols="80" rows="10"></textarea>

<script>
"use strict"
// 동기 요청의 문제점
// => 서버에서 응답을 할 때까지 send() 메서드는 리턴하지 않는다.
// => 따라서 작업 시간이 오래 걸리는 경우 send() 메서드가 리턴하지 않아서  
//    다른 작업을 수행하지 못하는 상황이 발생한다.

var ta = document.querySelector("#ta");

document.querySelector("#btn1").onclick = () => {
    var xhr = new XMLHttpRequest();

    // 클라이언트 쪽의 반응을 확인해 보기 위해 
    // test3.jsp는 일부로 응답시간을 지연시킬 것이다. 
    xhr.open("GET", "test3.jsp", false);
    xhr.send();
    // 서버에서 응답할 때 까지 send()는 리턴하지 않기 때문에 
    // 다음 라인을 실행할 수 없다. 
    // 즉 그 이후의 사용자 행위에 응답하지 못하는 상황이 발생한다.
    // 일종의 "벽돌" 화면이 된다. 
    // 해결 방법? 다음 예제를 보라!
    ta.value = xhr.responseText;
};

</script>
</body>
</html>





